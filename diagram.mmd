graph TD
    %% 定义样式
    classDef input fill:#f9f,stroke:#333,stroke-width:2px;
    classDef core fill:#bbf,stroke:#333,stroke-width:2px,color:black,font-weight:bold;
    classDef app fill:#dfd,stroke:#333,stroke-width:2px,color:black;
    classDef physical fill:#fdd,stroke:#333,stroke-width:2px,color:black;
    classDef user fill:#fff,stroke:#333,stroke-width:4px,stroke-dasharray: 5 5;

    subgraph Input_Layer ["输入层: 数据采集 (Input Layer)"]
        A1[用户 / 博物馆管理员]:::user
        A2[照片 / 六视图]:::input
        A3[非结构化文本提示词]:::input
        A1 -->|上传| A2
        A1 -->|输入| A3
    end

    subgraph Core_Layer ["生成层: AI 资产工厂 (The Generator)"]
        direction TB
        B1(Tripo AI v3.0 核心引擎):::core
        B2["自动拓扑<br/>(Web端优化)"]:::core
        B3["Stable Diffusion<br/>(纹理修复)"]:::core
        B4["自动骨骼绑定<br/>(动效适配)"]:::core
        
        A2 & A3 -->|API 调用| B1
        B1 --> B2
        B2 --> B3
        B3 --> B4
        B4 -->|输出| B5(["高保真 3D 资产 <br/>GLB / FBX"]):::core
    end

    subgraph Application_Layer ["应用层: 数字化体验 (Voyager & Curator)"]
        direction TB
        C1{{"漫游展厅 (The Voyager)<br/>第一人称漫游"}}:::app
        C2{{"AR 展馆 (The Curator)<br/>虚拟展厅"}}:::app
        
        B5 -->|Runtime 动态加载| C1
        B5 -->|WebXR 部署| C2
        
        C1_F1["Unity WebGL / 微信小程序"]
        C1_F2["FPS 漫游与交互"]
        C1 --> C1_F1
        C1 --> C1_F2
        
        C2_F1["虚实叠加 (Real-World Overlay)"]
        C2_F2["智能光照估计 (Smart Lighting)"]
        C2 --> C2_F1
        C2 --> C2_F2
    end

    subgraph Physical_Layer ["物理层: 实体转化引擎 (The Fab-Engine)"]
        direction TB
        D1("体素化分割 Voxel Segmentation"):::physical
        D2["互锁曲线生成<br/>(12/50/100 片)"]:::physical
        D3["公差补偿<br/>(智能收缩计算)"]:::physical
        D4["3D 打印与封装"]:::physical
        
        C1 -->|一键下单| D1
        C2 -->|一键下单| D1
        D1 --> D2
        D2 --> D3
        D3 --> D4
        D4 -->|发货| E1["实体文创产品"]:::physical
    end
